stateDiagram-v2
  direction TB
  [*] --> initialized
  initialized --> parsing_architecture : parse_model [valid_parse_request_] / begin_parse_
  initialized --> errored : parse_model [invalid_parse_request_] / set_invalid_argument_
  parsing_architecture --> parse_architecture_decision : [always] / run_parse_architecture_
  parse_architecture_decision --> errored : [phase_failed_] / none
  parse_architecture_decision --> mapping_architecture : [phase_ok_] / none
  mapping_architecture --> map_architecture_decision : [always] / run_map_architecture_
  map_architecture_decision --> errored : [phase_failed_] / none
  map_architecture_decision --> parsing_hparams : [phase_ok_] / none
  parsing_hparams --> parse_hparams_decision : [always] / run_parse_hparams_
  parse_hparams_decision --> errored : [phase_failed_] / none
  parse_hparams_decision --> parsing_vocab : [phase_ok_] / none
  parsing_vocab --> parse_vocab_decision : [always] / run_parse_vocab_
  parse_vocab_decision --> errored : [phase_failed_] / none
  parse_vocab_decision --> done : [phase_ok_and_skip_map_tensors_] / none
  parse_vocab_decision --> mapping_tensors : [phase_ok_and_map_tensors_] / none
  mapping_tensors --> map_tensors_decision : [always] / run_map_tensors_
  map_tensors_decision --> errored : [phase_failed_] / none
  map_tensors_decision --> done : [phase_ok_] / none
  done --> initialized : [always] / mark_done_
  errored --> initialized : [always] / ensure_last_error_
  initialized --> errored : _ [always] / on_unexpected_
  parsing_architecture --> errored : _ [always] / on_unexpected_
  parse_architecture_decision --> errored : _ [always] / on_unexpected_
  mapping_architecture --> errored : _ [always] / on_unexpected_
  map_architecture_decision --> errored : _ [always] / on_unexpected_
  parsing_hparams --> errored : _ [always] / on_unexpected_
  parse_hparams_decision --> errored : _ [always] / on_unexpected_
  parsing_vocab --> errored : _ [always] / on_unexpected_
  parse_vocab_decision --> errored : _ [always] / on_unexpected_
  mapping_tensors --> errored : _ [always] / on_unexpected_
  map_tensors_decision --> errored : _ [always] / on_unexpected_
  done --> errored : _ [always] / on_unexpected_
  errored --> errored : _ [always] / on_unexpected_
