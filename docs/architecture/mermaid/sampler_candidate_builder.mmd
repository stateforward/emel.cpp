stateDiagram-v2
  direction TB
  [*] --> initialized
  initialized --> validating : build [always] / begin_build_
  validating --> validate_decision : [always] / run_validate_
  validate_decision --> errored : [phase_failed_] / none
  validate_decision --> building_candidates : [phase_ok_] / none
  building_candidates --> build_decision : [always] / run_build_candidates_
  build_decision --> errored : [phase_failed_] / none
  build_decision --> normalizing_scores : [phase_ok_] / none
  normalizing_scores --> normalize_decision : [always] / run_normalize_scores_
  normalize_decision --> errored : [phase_failed_] / none
  normalize_decision --> done : [phase_ok_] / none
  done --> initialized : [always] / publish_done_
  errored --> initialized : [always] / publish_error_
  initialized --> errored : _ [always] / on_unexpected_
  validating --> errored : _ [always] / on_unexpected_
  validate_decision --> errored : _ [always] / on_unexpected_
  building_candidates --> errored : _ [always] / on_unexpected_
  build_decision --> errored : _ [always] / on_unexpected_
  normalizing_scores --> errored : _ [always] / on_unexpected_
  normalize_decision --> errored : _ [always] / on_unexpected_
  done --> errored : _ [always] / on_unexpected_
  errored --> errored : _ [always] / on_unexpected_
