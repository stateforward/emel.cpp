stateDiagram-v2
  direction TB
  [*] --> initialized
  initialized --> validating : split [lambda_guards_9_45] / lambda_actions_11_37
  initialized --> invalid_request : split [lambda_guards_14_5] / none
  validating --> normalizing_batch : [lambda_guards_17_42] / none
  validating --> invalid_request : [lambda_guards_80_5] / none
  normalizing_batch --> internal : on_entry [always] / lambda_actions_36_41
  normalizing_batch --> selecting_mode : [always] / none
  selecting_mode --> splitting_simple : [lambda_guards_82_40] / none
  selecting_mode --> splitting_equal_primary : [lambda_guards_90_52] / none
  selecting_mode --> splitting_equal : [lambda_guards_86_39] / none
  selecting_mode --> splitting_seq : [lambda_guards_95_37] / none
  selecting_mode --> invalid_request : [always] / none
  splitting_simple --> internal : on_entry [always] / lambda_actions_187_38
  splitting_simple --> publishing : [lambda_guards_100_41] / none
  splitting_simple --> split_failed : [lambda_guards_114_5] / none
  splitting_equal --> internal : on_entry [always] / lambda_actions_214_37
  splitting_equal --> publishing : [lambda_guards_100_41] / none
  splitting_equal --> split_failed : [lambda_guards_114_5] / none
  splitting_equal_primary --> internal : on_entry [always] / lambda_actions_333_45
  splitting_equal_primary --> publishing : [lambda_guards_100_41] / none
  splitting_equal_primary --> split_failed : [lambda_guards_114_5] / none
  splitting_seq --> internal : on_entry [always] / lambda_actions_458_35
  splitting_seq --> publishing : [lambda_guards_100_41] / none
  splitting_seq --> split_failed : [lambda_guards_114_5] / none
  publishing --> internal : on_entry [always] / lambda_actions_524_33
  publishing --> done : [always] / none
  done --> validating : split [lambda_guards_9_45] / lambda_actions_11_37
  done --> invalid_request : split [lambda_guards_14_5] / none
  invalid_request --> validating : split [lambda_guards_9_45] / lambda_actions_11_37
  invalid_request --> invalid_request : split [lambda_guards_14_5] / none
  split_failed --> validating : split [lambda_guards_9_45] / lambda_actions_11_37
  split_failed --> invalid_request : split [lambda_guards_14_5] / none
  unexpected_event --> validating : split [lambda_guards_9_45] / lambda_actions_11_37
  unexpected_event --> invalid_request : split [lambda_guards_14_5] / none
  initialized --> unexpected_event : _ [always] / none
  validating --> unexpected_event : _ [always] / none
  normalizing_batch --> unexpected_event : _ [always] / none
  selecting_mode --> unexpected_event : _ [always] / none
  splitting_simple --> unexpected_event : _ [always] / none
  splitting_equal --> unexpected_event : _ [always] / none
  splitting_equal_primary --> unexpected_event : _ [always] / none
  splitting_seq --> unexpected_event : _ [always] / none
  publishing --> unexpected_event : _ [always] / none
  done --> unexpected_event : _ [always] / none
  invalid_request --> unexpected_event : _ [always] / none
  split_failed --> unexpected_event : _ [always] / none
  unexpected_event --> unexpected_event : _ [always] / none
