# model_loader

Source: [`emel/model/loader/sm.hpp`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp)

## Mermaid

```mermaid
stateDiagram-v2
  [*] --> emel::model::loader::initialized
  emel__model__loader__initialized --> emel__model__loader__mapping_parser : emel__model__loader__event__load [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__start_map_parser_
  emel__model__loader__mapping_parser --> emel__model__loader__parsing : emel__model__loader__events__mapping_parser_done [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__parse_
  emel__model__loader__mapping_parser --> emel__model__loader__errored : emel__model__loader__events__mapping_parser_error [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__dispatch_error_
  emel__model__loader__parsing --> emel__model__loader__loading_weights : emel__model__loader__events__parsing_done [boost__sml__aux__zero_wrapper_emel__model__loader__guard__should_load_weights_] / boost__sml__aux__zero_wrapper_emel__model__loader__action__load_weights_
  emel__model__loader__parsing --> emel__model__loader__validating_structure : emel__model__loader__events__parsing_done [boost__sml__aux__zero_wrapper_emel__model__loader__guard__skip_weights_] / boost__sml__aux__zero_wrapper_emel__model__loader__action__validate_structure_
  emel__model__loader__parsing --> emel__model__loader__errored : emel__model__loader__events__parsing_error [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__dispatch_error_
  emel__model__loader__loading_weights --> emel__model__loader__mapping_layers : emel__model__loader__events__loading_done [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__store_and_map_layers_
  emel__model__loader__loading_weights --> emel__model__loader__errored : emel__model__loader__events__loading_error [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__dispatch_error_
  emel__model__loader__mapping_layers --> emel__model__loader__validating_structure : emel__model__loader__events__layers_mapped [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__validate_structure_
  emel__model__loader__mapping_layers --> emel__model__loader__errored : emel__model__loader__events__layers_map_error [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__dispatch_error_
  emel__model__loader__validating_structure --> emel__model__loader__validating_architecture : emel__model__loader__events__structure_validated [boost__sml__aux__zero_wrapper_emel__model__loader__guard__has_arch_validate_] / boost__sml__aux__zero_wrapper_emel__model__loader__action__validate_architecture_
  emel__model__loader__validating_structure --> emel__model__loader__done : emel__model__loader__events__structure_validated [boost__sml__aux__zero_wrapper_emel__model__loader__guard__no_arch_validate_] / boost__sml__aux__zero_wrapper_emel__model__loader__action__dispatch_done_
  emel__model__loader__validating_structure --> emel__model__loader__errored : emel__model__loader__events__structure_error [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__dispatch_error_
  emel__model__loader__validating_architecture --> emel__model__loader__done : emel__model__loader__events__architecture_validated [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__dispatch_done_
  emel__model__loader__validating_architecture --> emel__model__loader__errored : emel__model__loader__events__architecture_error [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__dispatch_error_
  emel__model__loader__initialized --> emel__model__loader__errored : boost__sml__back___ [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__on_unexpected_
  emel__model__loader__mapping_parser --> emel__model__loader__errored : boost__sml__back___ [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__on_unexpected_
  emel__model__loader__parsing --> emel__model__loader__errored : boost__sml__back___ [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__on_unexpected_
  emel__model__loader__loading_weights --> emel__model__loader__errored : boost__sml__back___ [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__on_unexpected_
  emel__model__loader__mapping_layers --> emel__model__loader__errored : boost__sml__back___ [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__on_unexpected_
  emel__model__loader__validating_structure --> emel__model__loader__errored : boost__sml__back___ [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__on_unexpected_
  emel__model__loader__validating_architecture --> emel__model__loader__errored : boost__sml__back___ [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__on_unexpected_
  emel__model__loader__done --> emel__model__loader__errored : boost__sml__back___ [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__on_unexpected_
  emel__model__loader__errored --> emel__model__loader__errored : boost__sml__back___ [boost__sml__front__always] / boost__sml__aux__zero_wrapper_emel__model__loader__action__on_unexpected_
```

## Transitions

| Source | Event | Guard | Action | Target |
| --- | --- | --- | --- | --- |
| [`initialized`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`load`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`start_map_parser>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`mapping_parser`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`mapping_parser`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`mapping_parser_done`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`parse>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`parsing`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`mapping_parser`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`mapping_parser_error`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`dispatch_error>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`parsing`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`parsing_done`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`should_load_weights>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`load_weights>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`loading_weights`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`parsing`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`parsing_done`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`skip_weights>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`validate_structure>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`validating_structure`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`parsing`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`parsing_error`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`dispatch_error>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`loading_weights`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`loading_done`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`store_and_map_layers>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`mapping_layers`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`loading_weights`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`loading_error`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`dispatch_error>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`mapping_layers`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`layers_mapped`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`validate_structure>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`validating_structure`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`mapping_layers`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`layers_map_error`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`dispatch_error>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`validating_structure`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`structure_validated`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`has_arch_validate>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`validate_architecture>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`validating_architecture`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`validating_structure`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`structure_validated`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`no_arch_validate>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`dispatch_done>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`done`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`validating_structure`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`structure_error`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`dispatch_error>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`validating_architecture`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`architecture_validated`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`dispatch_done>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`done`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`validating_architecture`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`architecture_error`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`dispatch_error>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`initialized`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`mapping_parser`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`parsing`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`loading_weights`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`mapping_layers`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`validating_structure`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`validating_architecture`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`done`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
| [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/emel/model/loader/sm.hpp) |
