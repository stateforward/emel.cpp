# jinja_renderer

Source: [`emel/jinja/renderer/sm.hpp`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp)

## Mermaid

```mermaid
stateDiagram-v2
  direction TB
  [*] --> initialized
  initialized --> setup : render [lambda_guards_8_38] / begin_render_
  initialized --> errored : render [lambda_guards_12_40] / reject_invalid_render_
  done --> setup : render [lambda_guards_8_38] / begin_render_
  done --> errored : render [lambda_guards_12_40] / reject_invalid_render_
  errored --> setup : render [lambda_guards_8_38] / begin_render_
  errored --> errored : render [lambda_guards_12_40] / reject_invalid_render_
  unexpected --> setup : render [lambda_guards_8_38] / begin_render_
  unexpected --> unexpected : render [lambda_guards_12_40] / reject_invalid_render_
  setup --> eval_stmt : [always] / seed_program_
  eval_stmt --> render_decision : [phase_failed_] / none
  eval_stmt --> eval_expr : [needs_expr_] / none
  eval_stmt --> eval_stmt : [has_stmt_work_] / eval_next_stmt_
  eval_stmt --> render_decision : [no_stmt_work_] / none
  eval_expr --> eval_expr : [has_pending_expr_] / eval_pending_expr_
  eval_expr --> render_decision : [phase_failed_] / none
  eval_expr --> write_output : [always] / none
  write_output --> render_decision : [phase_failed_] / none
  write_output --> write_output : [needs_write_] / write_pending_value_
  write_output --> eval_stmt : [always] / none
  render_decision --> done : [phase_ok_] / finalize_done_
  render_decision --> errored : [phase_failed_] / finalize_error_
  initialized --> unexpected : _ [always] / on_unexpected_
  setup --> unexpected : _ [always] / on_unexpected_
  eval_stmt --> unexpected : _ [always] / on_unexpected_
  eval_expr --> unexpected : _ [always] / on_unexpected_
  write_output --> unexpected : _ [always] / on_unexpected_
  render_decision --> unexpected : _ [always] / on_unexpected_
  done --> unexpected : _ [always] / on_unexpected_
  errored --> unexpected : _ [always] / on_unexpected_
  unexpected --> unexpected : _ [always] / on_unexpected_
```

## Transitions

| Source | Event | Guard | Action | Target |
| --- | --- | --- | --- | --- |
| [`initialized`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`lambda_guards_8_38`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`begin_render>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`setup`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`initialized`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`lambda_guards_12_40`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`reject_invalid_render>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`done`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`lambda_guards_8_38`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`begin_render>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`setup`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`done`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`lambda_guards_12_40`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`reject_invalid_render>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`errored`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`lambda_guards_8_38`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`begin_render>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`setup`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`errored`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`lambda_guards_12_40`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`reject_invalid_render>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`lambda_guards_8_38`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`begin_render>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`setup`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`lambda_guards_12_40`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`reject_invalid_render>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`setup`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`seed_program>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`eval_stmt`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`eval_stmt`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`phase_failed>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`none`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render_decision`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`eval_stmt`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`needs_expr>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`none`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`eval_expr`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`eval_stmt`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`has_stmt_work>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`eval_next_stmt>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`eval_stmt`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`eval_stmt`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`no_stmt_work>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`none`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render_decision`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`eval_expr`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`has_pending_expr>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`eval_pending_expr>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`eval_expr`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`eval_expr`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`phase_failed>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`none`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render_decision`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`eval_expr`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`none`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`write_output`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`write_output`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`phase_failed>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`none`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`render_decision`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`write_output`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`needs_write>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`write_pending_value>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`write_output`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`write_output`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`none`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`eval_stmt`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`render_decision`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`phase_ok>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`finalize_done>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`done`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`render_decision`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | - | [`phase_failed>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`finalize_error>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`errored`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`initialized`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`setup`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`eval_stmt`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`eval_expr`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`write_output`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`render_decision`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`done`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`errored`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
| [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`_`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`always`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`on_unexpected>`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) | [`unexpected`](https://github.com/stateforward/emel.cpp/blob/main/src/emel/jinja/renderer/sm.hpp) |
